# UBL Forever Bootstrap - Production profile (LAB 512)
# Generated on 2026-02-21 from locally verified release artifacts.
# Fill all SET_ME values before first production bootstrap run.

# Required release source
UBL_REPO=LogLine-Foundation/UBL-CORE
UBL_RELEASE_TAG=v0.1.0-core-baseline

# Runtime layout on LAB 512
UBL_BASE_DIR=/var/lib/ubl
UBL_API_DOMAIN=ubl.agency
UBL_RICH_URL_DOMAIN=logline.world
# Legacy fallback only (prefer UBL_API_DOMAIN + UBL_RICH_URL_DOMAIN)
# UBL_DOMAIN=logline.world

# PM2 app names
UBL_PM2_GATE_APP=ubl-gate
UBL_PM2_TUNNEL_APP=ubl-cloudflared

# Canonical first receipt identity
UBL_EMIT_BOOTSTRAP=true
UBL_BOOTSTRAP_ID=logline-world-genesis
UBL_BOOTSTRAP_WORLD=a/logline/t/main
UBL_EMIT_BOOTSTRAP_ARTIFACT_CHIPS=true
UBL_REQUIRE_BOOTSTRAP_ARTIFACT_CHIPS=true

# Final local checks + evidence bundle + final receipt
UBL_FINAL_CHECKS_REQUIRE_PASS=true
UBL_FINAL_BUNDLE_ENABLE=true
UBL_FINAL_BUNDLE_DIR=/var/lib/ubl/state/final
UBL_FINAL_BUNDLE_BASENAME=forever-bootstrap-evidence
UBL_FINAL_BUNDLE_INCLUDE_SNAPSHOTS=true
UBL_FINAL_BUNDLE_UPLOAD_ENABLE=true
UBL_FINAL_BUNDLE_UPLOAD_HTTP_URL=https://SET_ME_LAB256_UPLOAD_ENDPOINT
UBL_FINAL_BUNDLE_UPLOAD_HTTP_METHOD=PUT
UBL_FINAL_BUNDLE_UPLOAD_HTTP_AUTH_HEADER="Authorization: Bearer SET_ME_LAB256_UPLOAD_TOKEN"
UBL_FINAL_BUNDLE_NOTIFY_WS_URL=wss://SET_ME_LAB256_WS_ENDPOINT
UBL_FINAL_BUNDLE_REQUIRE_REMOTE=true
UBL_FINAL_REPORT_RECEIPT_ENABLE=true
UBL_FINAL_REPORT_RECEIPT_REQUIRE=true
UBL_FINAL_REPORT_ID_PREFIX=logline-world-genesis:final
# Public receipt URL is emitted by core (`/v1/receipts/:cid/url`), not by this script.
UBL_RECEIPT_QR_ENABLE=true
UBL_RECEIPT_QR_REQUIRE_TOOL=false
UBL_RECEIPT_QR_FORMATS=png,svg
UBL_RECEIPT_QR_ECLEVEL=M
UBL_RECEIPT_QR_SCALE=6

# Reproducibility observability (optional strict pin)
# Keep blank if you expect host/toolchain variance.
UBL_EXPECTED_GATE_SHA256=

# Trust anchor pinning (STRICT)
UBL_ATTEST_PUBKEY_SHA256=029516b773dfcd1b195c5f1219e8847588dc78d2b136783ae1229275e2396255
UBL_ALLOW_UNPINNED_ATTEST_KEY=false
UBL_TARBALL_SHA256=a9fdf8b4087da867404ee30655ec8fbe38932bec0a75150e1b45b3dc2a17a7a4
UBL_ALLOW_UNPINNED_TARBALL=false

# Key birth safety
UBL_ALLOW_KEY_BIRTH_OVERRIDE=false

# External witness publication (STRICT)
UBL_REQUIRE_EXTERNAL_WITNESS=true
# Executable that publishes witness externally. Receives witness path as argv[1]
# and WITNESS_FILE env var.
UBL_EXTERNAL_WITNESS_BIN=/usr/local/bin/publish_witness
# Legacy shell mode stays disabled.
UBL_ALLOW_SHELL_WITNESS_CMD=false
UBL_EXTERNAL_WITNESS_CMD=

# Cloudflare tunnel runtime (STRICT)
UBL_CLOUDFLARE_ENABLE=true
CLOUDFLARE_TUNNEL_TOKEN=SET_ME
CLOUDFLARE_TUNNEL_ORIGIN_URL=http://127.0.0.1:4000
# Must stay true only when Access app/policy is already active.
UBL_CLOUDFLARE_ACCESS_POLICY_CONFIRMED=true

# DNS automation
UBL_CLOUDFLARE_DNS_ENABLE=true
UBL_CLOUDFLARE_RECORD_NAME=ubl.agency
UBL_CLOUDFLARE_RICH_RECORD_ENABLE=true
UBL_CLOUDFLARE_RICH_RECORD_NAME=logline.world
CLOUDFLARE_API_EMAIL=SET_ME
CLOUDFLARE_GLOBAL_API_KEY=SET_ME
# Legacy aliases (optional)
CLOUDFLARE_API=
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ZONE_ID=
# Optional per-domain override (recommended when API and Rich URL are in different zones)
CLOUDFLARE_API_TOKEN_API=
CLOUDFLARE_API_EMAIL_API=
CLOUDFLARE_GLOBAL_API_KEY_API=
CLOUDFLARE_API_ZONE_ID=SET_ME
CLOUDFLARE_API_TOKEN_RICH=
CLOUDFLARE_API_EMAIL_RICH=
CLOUDFLARE_GLOBAL_API_KEY_RICH=
CLOUDFLARE_RICH_ZONE_ID=SET_ME
CLOUDFLARE_TUNNEL_ID=SET_ME

# Prefer system service resilience for cloudflared
UBL_CLOUDFLARE_SERVICE_INSTALL=true

# Record edge rules for /v1/chips and /v1/receipts
UBL_CLOUDFLARE_RATE_LIMIT_RULES=SET_ME

# Encrypted backup from day 1 (STRICT)
UBL_BACKUP_ENABLE=true
UBL_BACKUP_CRON="17 3 * * *"
UBL_BACKUP_DEST=/var/lib/ubl/backups
UBL_BACKUP_ENCRYPTION_PASSPHRASE_FILE=/var/lib/ubl/secrets/backup_passphrase
UBL_BACKUP_ENCRYPTION_MODE=auto
UBL_BACKUP_PBKDF2_ITER=600000
UBL_BACKUP_INCLUDE_RUNTIME_SECRETS=false

# Heartbeat receipt schedule
UBL_HEARTBEAT_ENABLE=true
UBL_HEARTBEAT_CRON="11 2 * * *"
UBL_HEARTBEAT_WORLD=a/logline/t/main
UBL_HEARTBEAT_ID_PREFIX=logline-world-heartbeat

# Freeze marker + symbol immutability
UBL_WRITE_FREEZE_MANIFEST=true
UBL_FREEZE_MANIFEST_OVERWRITE=false
UBL_SYMBOL_OVERWRITE=false
UBL_SNAPSHOT_INCLUDE_RUNTIME_SECRETS=false

# Host lockdown
UBL_SERVICE_USER=ubl-service
UBL_SERVICE_GROUP=ubl-service
UBL_SERVICE_HOME=/var/lib/ubl-service
UBL_LOG_DIR=/var/log/ubl
UBL_OPERATOR_USER=ubl-ops
UBL_CREATE_OPERATOR=false
UBL_ENABLE_SUDOERS_POLICY=true
UBL_BREAKGLASS_ADMIN=SET_ME
UBL_INSTALL_MAINTENANCE_CMDS=true
UBL_PM2_STARTUP_REGISTER=true
UBL_MARK_GENESIS_IMMUTABLE=true
UBL_FAIL_ON_OPERATOR_BROAD_SUDO=true

# Work-zone cleanup policy
UBL_TMP_GLOBS=/tmp/ubl-*,/tmp/ubl_*,/tmp/vcx_*
UBL_ALLOW_NON_TMP_GLOBS=false
UBL_DOWNLOAD_RETENTION_DAYS=21
UBL_CLEAN_CARGO_CACHE=false
