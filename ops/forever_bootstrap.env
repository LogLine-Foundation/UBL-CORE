# Required release source
UBL_REPO=LogLine-Foundation/UBL-CORE
UBL_RELEASE_TAG=v0.1.0-core-baseline

# Runtime layout on LAB 512
UBL_BASE_DIR=$HOME/ubl-core-forever
UBL_API_DOMAIN=ubl.agency
UBL_RICH_URL_DOMAIN=logline.world
# Legacy fallback only (prefer UBL_API_DOMAIN + UBL_RICH_URL_DOMAIN)
# UBL_DOMAIN=logline.world

# PM2 app names
UBL_PM2_GATE_APP=ubl-gate
UBL_PM2_TUNNEL_APP=ubl-cloudflared

# Canonical first receipt identity
UBL_EMIT_BOOTSTRAP=true
UBL_BOOTSTRAP_ID=logline-world-genesis
UBL_BOOTSTRAP_WORLD=a/logline/t/main
UBL_EMIT_BOOTSTRAP_ARTIFACT_CHIPS=true
UBL_REQUIRE_BOOTSTRAP_ARTIFACT_CHIPS=false

# Final local checks + evidence bundle + final receipt
UBL_FINAL_CHECKS_REQUIRE_PASS=false
UBL_FINAL_BUNDLE_ENABLE=true
UBL_FINAL_BUNDLE_DIR=
UBL_FINAL_BUNDLE_BASENAME=forever-bootstrap-evidence
UBL_FINAL_BUNDLE_INCLUDE_SNAPSHOTS=true
UBL_FINAL_BUNDLE_UPLOAD_ENABLE=true
UBL_FINAL_BUNDLE_UPLOAD_HTTP_URL=https://SET_ME_LAB256_UPLOAD_ENDPOINT
UBL_FINAL_BUNDLE_UPLOAD_HTTP_METHOD=PUT
UBL_FINAL_BUNDLE_UPLOAD_HTTP_AUTH_HEADER="Authorization: Bearer SET_ME_LAB256_UPLOAD_TOKEN"
UBL_FINAL_BUNDLE_NOTIFY_WS_URL=wss://SET_ME_LAB256_WS_ENDPOINT
UBL_FINAL_BUNDLE_REQUIRE_REMOTE=true
UBL_FINAL_REPORT_RECEIPT_ENABLE=true
UBL_FINAL_REPORT_RECEIPT_REQUIRE=true
UBL_FINAL_REPORT_ID_PREFIX=logline-world-genesis:final
# Public receipt URL is emitted by core (`/v1/receipts/:cid/url`), not by this script.
UBL_RECEIPT_QR_ENABLE=true
UBL_RECEIPT_QR_REQUIRE_TOOL=false
UBL_RECEIPT_QR_FORMATS=png,svg
UBL_RECEIPT_QR_ECLEVEL=M
UBL_RECEIPT_QR_SCALE=6

# Reproducibility observability (optional)
UBL_EXPECTED_GATE_SHA256=

# Trust anchor pinning (recommended: set both, keep unpinned flags false)
UBL_ATTEST_PUBKEY_SHA256=
UBL_ALLOW_UNPINNED_ATTEST_KEY=false
UBL_TARBALL_SHA256=
UBL_ALLOW_UNPINNED_TARBALL=false

# Key birth safety
UBL_ALLOW_KEY_BIRTH_OVERRIDE=false

# External witness publication
# Example:
# UBL_EXTERNAL_WITNESS_BIN=/usr/local/bin/publish_witness
UBL_REQUIRE_EXTERNAL_WITNESS=false
UBL_EXTERNAL_WITNESS_BIN=
# Legacy shell command mode (unsafe; keep false unless absolutely necessary)
UBL_ALLOW_SHELL_WITNESS_CMD=false
UBL_EXTERNAL_WITNESS_CMD=

# Cloudflare tunnel runtime
UBL_CLOUDFLARE_ENABLE=false
CLOUDFLARE_TUNNEL_TOKEN=
CLOUDFLARE_TUNNEL_ORIGIN_URL=http://127.0.0.1:4000
# MUST confirm Access app/policy exists before enabling tunnel exposure
UBL_CLOUDFLARE_ACCESS_POLICY_CONFIRMED=false

# Optional DNS automation (requires DNS edit scope)
UBL_CLOUDFLARE_DNS_ENABLE=false
UBL_CLOUDFLARE_RECORD_NAME=ubl.agency
UBL_CLOUDFLARE_RICH_RECORD_ENABLE=true
UBL_CLOUDFLARE_RICH_RECORD_NAME=logline.world
CLOUDFLARE_API_EMAIL=
CLOUDFLARE_GLOBAL_API_KEY=
# Legacy aliases (optional)
CLOUDFLARE_API=
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ZONE_ID=
# Optional per-domain override (recommended when API and Rich URL are in different zones)
CLOUDFLARE_API_TOKEN_API=
CLOUDFLARE_API_EMAIL_API=
CLOUDFLARE_GLOBAL_API_KEY_API=
CLOUDFLARE_API_ZONE_ID=
CLOUDFLARE_API_TOKEN_RICH=
CLOUDFLARE_API_EMAIL_RICH=
CLOUDFLARE_GLOBAL_API_KEY_RICH=
CLOUDFLARE_RICH_ZONE_ID=
CLOUDFLARE_TUNNEL_ID=

# Optional cloudflared system service install (trade-off with PM2)
UBL_CLOUDFLARE_SERVICE_INSTALL=false

# Registry of edge rate-limit rules (store IDs/names for /v1/receipts and /v1/chips)
# Example: rl_receipts:abc123,rl_chips:def456
UBL_CLOUDFLARE_RATE_LIMIT_RULES=

# Encrypted backup from day 1
UBL_BACKUP_ENABLE=true
UBL_BACKUP_CRON="17 3 * * *"
# Off-site encrypted destination (mount, synced dir, etc.)
UBL_BACKUP_DEST=
# File containing only the passphrase
UBL_BACKUP_ENCRYPTION_PASSPHRASE_FILE=
# Encryption mode: auto | openssl-gcm | openssl-cbc-hmac
UBL_BACKUP_ENCRYPTION_MODE=auto
UBL_BACKUP_PBKDF2_ITER=600000
# Include runtime.env with secrets in encrypted backup (default false)
UBL_BACKUP_INCLUDE_RUNTIME_SECRETS=false

# Heartbeat receipt schedule
UBL_HEARTBEAT_ENABLE=true
UBL_HEARTBEAT_CRON="11 2 * * *"
UBL_HEARTBEAT_WORLD=a/logline/t/main
UBL_HEARTBEAT_ID_PREFIX=logline-world-heartbeat

# Freeze marker (constitutional drift baseline)
UBL_WRITE_FREEZE_MANIFEST=true
# Keep immutable by default; set true only for intentional re-baselining
UBL_FREEZE_MANIFEST_OVERWRITE=false
# Include runtime.env with secrets in local snapshot (default false)
UBL_SNAPSHOT_INCLUDE_RUNTIME_SECRETS=false

# Host lockdown (run with scripts/host_lockdown.sh as admin/root)
UBL_SERVICE_USER=ubl
UBL_SERVICE_GROUP=ubl
UBL_SERVICE_HOME=/var/lib/ubl
# Optional explicit override. Default is ${UBL_BASE_DIR}/state in bootstrap script.
# UBL_STATE_DIR=/var/lib/ubl/state
UBL_LOG_DIR=/var/log/ubl
UBL_OPERATOR_USER=
UBL_CREATE_OPERATOR=false
UBL_ENABLE_SUDOERS_POLICY=false
UBL_BREAKGLASS_ADMIN=
UBL_INSTALL_MAINTENANCE_CMDS=true
UBL_PM2_STARTUP_REGISTER=true
UBL_MARK_GENESIS_IMMUTABLE=false
UBL_FAIL_ON_OPERATOR_BROAD_SUDO=true

# Work-zone cleanup policy (scripts/workzone_cleanup.sh)
UBL_TMP_GLOBS=/tmp/ubl-*,/tmp/ubl_*,/tmp/vcx_*
UBL_ALLOW_NON_TMP_GLOBS=false
UBL_DOWNLOAD_RETENTION_DAYS=21
UBL_CLEAN_CARGO_CACHE=false

# Local bootstrap-only overrides (LAB rehearsal)
UBL_ALLOW_UNPINNED_ATTEST_KEY=true
UBL_ALLOW_UNPINNED_TARBALL=true
UBL_BACKUP_ENABLE=false
UBL_HEARTBEAT_ENABLE=false
UBL_CLOUDFLARE_ENABLE=false
UBL_CLOUDFLARE_DNS_ENABLE=false
